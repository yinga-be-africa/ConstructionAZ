!function(){var t={681:function(){Array.from||(Array.from=function(t){return[].slice.call(t)}),Array.prototype.includes||(Array.prototype.includes=function(t,e){return-1!==this.indexOf(t,e)}),NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.includes||(String.prototype.includes=function(t,e){return void 0===e&&(e=0),-1!==this.indexOf(t,e)})}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}!function(){"use strict";r(681);var t=function(){function t(){}return t.prototype.hasClass=function(t,e){return t.className.split(" ").indexOf(e)>-1},t.prototype.addClass=function(t,e){t.className.split(" ").indexOf(e)>-1||(t.className+=" "+(e||""),t.className=t.className.trim())},t.prototype.removeClass=function(t,e){var r=new RegExp(e,"g");t.className=t.className.replace(r,"").trim()},t.prototype.get=function(t){return document.querySelector(t)},t.prototype.getAll=function(t){return document.querySelectorAll(t)},t.prototype.createElement=function(t,e){var r=document.createElement(t);if(e)for(var n in e)n&&r.setAttribute(n,e[n]);return r},t.prototype.scrollTo=function(t,e){t.scrollTop=e},t.prototype.addStyleLink=function(t,e){var r=this.createElement("link");r.rel="stylesheet",r.type="text/css",r.media="all",r.href=e,t.appendChild(r)},t.prototype.addEvent=function(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent&&t.attachEvent("on"+e,r)},t.prototype.appendToBody=function(t){document.body.appendChild(t)},t}(),e=function(){function t(){this.callTrk=window.CallTrk||CallTrk,this.callTrkSwap=window.CallTrkSwap||CallTrkSwap,this.firstNamespace=this.callTrkSwap.firstNamespace(),this.sessionId=this.callTrkSwap.getSessionID(),this.companyId=this.firstNamespace.id,this.baseUrl=this.getBaseUrl(this.endpoint)}return t.prototype.getBaseUrl=function(t){return t.match(/.*\/\/[^\/]+/)[0]},Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.firstNamespace.endpoints.chat||this.firstNamespace.endpoints.contact||this.firstNamespace.endpoints.form_capture||this.firstNamespace.endpoints.custom_forms||this.firstNamespace.endpoints.external_forms||this.firstNamespace.endpoints.cr_form||this.firstNamespace.endpoints.external_chats},enumerable:!1,configurable:!0}),t}(),n=function(){function t(){}return t.prototype.domain=function(t){var e=(t||"").match(/(.*\/\/)([^\/]+)/);return e?e[2]:""},t.prototype.paramsString=function(t){return t?Object.keys(t).map((function(e){var r=null==t[e]?"":t[e];return encodeURIComponent(e)+"="+encodeURIComponent(String(r))})).join("&"):""},t}(),i=function(){function t(){}return t.log=function(t,e){void 0===e&&(e="swap"),CallTrkSwap._isDebug&&CallTrkSwap._log.push(e+": "+t)},t}(),o=function(){function t(t,e,r,n){this.dom=t,this.swappy=e,this.url=r,this.win=n,this.win=n||window}return t.prototype.init=function(){this.insertForms(),this.dom.addEvent(this.win,"message",this.iframeMessageHandler),this.initializeMutationObserver()},t.prototype.initializeMutationObserver=function(){var t=this;this.mutationObserver=new MutationObserver((function(){t.insertForms()})),this.mutationObserver.observe(this.win.document.body,{childList:!0,subtree:!0})},t.prototype.insertForms=function(){var t=this.dom.getAll('div[id^="cr-form-"]');if(t)for(var e=0;e<t.length;e++){var r=t[e],n=/cr-form-(.*)/.exec(r.id)[1],o=this.buildFormUrl(n);r.querySelector('iframe[id="'+n+'"]')?i.log("Iframe already exists in div."):r.appendChild(this.dom.createElement("iframe",{id:n,src:o,style:"border: none; width: 100%;"}))}},t.prototype.buildFormUrl=function(t){return this.swappy.firstNamespace.buildURL("cr_form",{formid:t})+"?"+this.url.paramsString({uuid:this.swappy.sessionId,fcid:this.swappy.callTrkSwap.getFormCaptureCookie(),url:this.win.location.href,formid:t})},Object.defineProperty(t.prototype,"iframeMessageHandler",{get:function(){var t=this;return function(e){var r=e.data;if("string"==typeof r){var n=r.split(":"),i="ifr_height"===n[0]&&3===n.length,o="redirect_url"===n[0]&&3===n.length;i&&t.setIframeHeights("#"+n[1],n[2]),o&&(t.win.location.href=n[1]+":"+n[2])}}},enumerable:!1,configurable:!0}),t.prototype.setIframeHeights=function(t,e){for(var r=this.dom.getAll(t),n=0;n<r.length;n++)r[n]&&r[n].setAttribute("height",e)},t}();(new(function(){function r(t){this.win=t,this.win=t||window}return r.prototype.init=function(){new o(new t,new e,new n,this.win).init()},r}())).init()}()}();